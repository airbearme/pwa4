<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirBear Real-Time Workflow Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.5); }
            50% { box-shadow: 0 0 40px rgba(34, 197, 94, 0.8); }
        }
        .workflow-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .workflow-card.active {
            border-color: #22c55e;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1));
            animation: pulse-glow 2s infinite;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        .user-avatar.user { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        .user-avatar.driver { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .timeline-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #22c55e;
            position: relative;
        }
        .timeline-dot::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(34, 197, 94, 0.3);
            top: -4px;
            left: -4px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        .status-badge {
            animation: slideIn 0.5s ease;
        }
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">üêª AirBear Real-Time Workflows</h1>
            <p class="text-gray-600">Watch user and driver interactions in real-time</p>
            <div class="mt-4">
                <button onclick="startDemo()" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition">
                    Start Live Demo
                </button>
                <button onclick="resetDemo()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition ml-2">
                    Reset
                </button>
            </div>
        </div>

        <!-- Live Status Bar -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse mr-2"></div>
                        <span class="text-sm font-medium">Live Status</span>
                    </div>
                    <div id="active-users" class="text-sm text-gray-600">
                        Active Users: <span class="font-bold">0</span>
                    </div>
                    <div id="active-drivers" class="text-sm text-gray-600">
                        Active Drivers: <span class="font-bold">0</span>
                    </div>
                </div>
                <div id="current-time" class="text-sm text-gray-500"></div>
            </div>
        </div>

        <!-- Workflow Grid -->
        <div class="grid md:grid-cols-2 gap-6">
            <!-- User Workflow -->
            <div class="workflow-card bg-white rounded-lg shadow-lg p-6" id="user-workflow">
                <div class="flex items-center mb-4">
                    <div class="user-avatar user mr-3">U</div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">User Journey</h2>
                        <p class="text-sm text-gray-600">Customer booking experience</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="workflow-step" data-step="1">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Browse Homepage</h3>
                                <p class="text-sm text-gray-600">User lands on AirBear homepage</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Pending</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="2">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Request Ride</h3>
                                <p class="text-sm text-gray-600">Clicks "Book Your AirBear"</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="3">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Select Location</h3>
                                <p class="text-sm text-gray-600">Chooses pickup and drop-off points</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="4">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Confirm Booking</h3>
                                <p class="text-sm text-gray-600">Reviews and confirms ride details</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="5">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Track Driver</h3>
                                <p class="text-sm text-gray-600">Watches driver approach in real-time</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Driver Workflow -->
            <div class="workflow-card bg-white rounded-lg shadow-lg p-6" id="driver-workflow">
                <div class="flex items-center mb-4">
                    <div class="user-avatar driver mr-3">D</div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Driver Journey</h2>
                        <p class="text-sm text-gray-600">Driver service experience</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="workflow-step" data-step="1">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Go Online</h3>
                                <p class="text-sm text-gray-600">Driver starts shift and goes online</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">Pending</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="2">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Receive Request</h3>
                                <p class="text-sm text-gray-600">Gets ride request notification</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="3">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Accept Ride</h3>
                                <p class="text-sm text-gray-600">Reviews and accepts the ride</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="4">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Navigate to Pickup</h3>
                                <p class="text-sm text-gray-600">Drives to customer location</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-step" data-step="5">
                        <div class="flex items-start">
                            <div class="timeline-dot mt-1 mr-3"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">Complete Trip</h3>
                                <p class="text-sm text-gray-600">Picks up customer and completes trip</p>
                                <div class="status-badge mt-1">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">Waiting</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Events Log -->
        <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üì° Live Event Stream</h2>
            <div id="event-log" class="space-y-2 max-h-64 overflow-y-auto">
                <div class="text-sm text-gray-500 italic">Waiting for events...</div>
            </div>
        </div>

        <!-- Integration Status -->
        <div class="mt-6 bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üîó System Integration Status</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <span class="text-green-600">‚úì</span>
                    </div>
                    <p class="text-sm font-medium">Frontend</p>
                    <p class="text-xs text-gray-500">React/Vite</p>
                </div>
                <div class="text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <span class="text-green-600">‚úì</span>
                    </div>
                    <p class="text-sm font-medium">Backend</p>
                    <p class="text-xs text-gray-500">Express API</p>
                </div>
                <div class="text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <span class="text-green-600">‚úì</span>
                    </div>
                    <p class="text-sm font-medium">Database</p>
                    <p class="text-xs text-gray-500">Supabase</p>
                </div>
                <div class="text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <span class="text-green-600">‚úì</span>
                    </div>
                    <p class="text-sm font-medium">Payments</p>
                    <p class="text-xs text-gray-500">Stripe</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let demoInterval;
        let currentStep = { user: 0, driver: 0 };
        let activeUsers = 0;
        let activeDrivers = 0;

        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }

        function addEvent(message, type = 'info') {
            const eventLog = document.getElementById('event-log');
            const eventDiv = document.createElement('div');
            
            const typeColors = {
                'info': 'bg-blue-100 text-blue-800',
                'success': 'bg-green-100 text-green-800',
                'warning': 'bg-orange-100 text-orange-800',
                'user': 'bg-blue-100 text-blue-800',
                'driver': 'bg-orange-100 text-orange-800'
            };
            
            eventDiv.className = `text-sm p-2 rounded ${typeColors[type]} status-badge`;
            eventDiv.innerHTML = `
                <span class="font-medium">${new Date().toLocaleTimeString()}</span> - ${message}
            `;
            
            if (eventLog.children[0]?.classList.contains('italic')) {
                eventLog.innerHTML = '';
            }
            
            eventLog.insertBefore(eventDiv, eventLog.firstChild);
            
            // Keep only last 10 events
            while (eventLog.children.length > 10) {
                eventLog.removeChild(eventLog.lastChild);
            }
        }

        function updateStep(workflow, stepIndex, status) {
            const workflowEl = document.getElementById(`${workflow}-workflow`);
            const step = workflowEl.querySelector(`[data-step="${stepIndex}"]`);
            const badge = step.querySelector('.status-badge span');
            
            workflowEl.classList.add('active');
            
            const statusConfig = {
                'active': { text: 'Active', class: 'bg-green-100 text-green-800' },
                'completed': { text: 'Completed', class: 'bg-green-100 text-green-800' },
                'pending': { text: 'Pending', class: 'bg-gray-100 text-gray-800' }
            };
            
            badge.textContent = statusConfig[status].text;
            badge.className = `text-xs px-2 py-1 rounded ${statusConfig[status].class}`;
        }

        function simulateUserWorkflow() {
            const steps = [
                { message: 'üë§ User landed on homepage', status: 'active' },
                { message: 'üìç User browsing available rides', status: 'completed' },
                { message: 'üöó User clicked "Book Your AirBear"', status: 'active' },
                { message: 'üó∫Ô∏è User selecting pickup location', status: 'completed' },
                { message: '‚úÖ User confirmed booking details', status: 'active' },
                { message: 'üëÄ User tracking driver approach', status: 'completed' }
            ];
            
            if (currentStep.user < steps.length) {
                const step = steps[currentStep.user];
                updateStep('user', currentStep.user + 1, step.status);
                addEvent(step.message, 'user');
                
                if (step.status === 'active') {
                    activeUsers++;
                    document.querySelector('#active-users span').textContent = activeUsers;
                }
                
                currentStep.user++;
            }
        }

        function simulateDriverWorkflow() {
            const steps = [
                { message: 'üöô Driver went online', status: 'active' },
                { message: 'üì± Driver waiting for ride requests', status: 'completed' },
                { message: 'üîî Driver received new ride request', status: 'active' },
                { message: '‚úÖ Driver accepted the ride', status: 'completed' },
                { message: 'üß≠ Driver navigating to pickup', status: 'active' },
                { message: 'üèÅ Driver completed the trip', status: 'completed' }
            ];
            
            if (currentStep.driver < steps.length) {
                const step = steps[currentStep.driver];
                updateStep('driver', currentStep.driver + 1, step.status);
                addEvent(step.message, 'driver');
                
                if (step.status === 'active') {
                    activeDrivers++;
                    document.querySelector('#active-drivers span').textContent = activeDrivers;
                }
                
                currentStep.driver++;
            }
        }

        function startDemo() {
            resetDemo();
            addEvent('üé¨ Starting real-time workflow demonstration...', 'info');
            
            demoInterval = setInterval(() => {
                simulateUserWorkflow();
                simulateDriverWorkflow();
                
                if (currentStep.user >= 6 && currentStep.driver >= 6) {
                    stopDemo();
                    addEvent('üéâ Workflow demonstration completed!', 'success');
                }
            }, 2000);
        }

        function stopDemo() {
            if (demoInterval) {
                clearInterval(demoInterval);
                demoInterval = null;
            }
        }

        function resetDemo() {
            stopDemo();
            
            currentStep = { user: 0, driver: 0 };
            activeUsers = 0;
            activeDrivers = 0;
            
            document.querySelector('#active-users span').textContent = '0';
            document.querySelector('#active-drivers span').textContent = '0';
            
            document.querySelectorAll('.workflow-card').forEach(card => {
                card.classList.remove('active');
            });
            
            document.querySelectorAll('.status-badge span').forEach(badge => {
                badge.textContent = 'Waiting';
                badge.className = 'text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded';
            });
            
            document.getElementById('event-log').innerHTML = 
                '<div class="text-sm text-gray-500 italic">Waiting for events...</div>';
        }

        // Initialize
        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
